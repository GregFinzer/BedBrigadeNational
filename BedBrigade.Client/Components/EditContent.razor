@using System.Security.Claims;
@using BedBrigade.Client.Services;
@using BedBrigade.Data.Models;
@using BedBrigade.Common;
@using Microsoft.AspNetCore.Components;
@using Microsoft.AspNetCore.Components.Authorization;
@using Syncfusion.Blazor.Grids;
@using Syncfusion.Blazor.Notifications;
@using Action = Syncfusion.Blazor.Grids.Action;
@using static BedBrigade.Common.Common;
@using BedBrigade.Client.Pages.Administration.Manage;
@using System.Data;
@using BedBrigade.Client.Pages.Home;

<div class="rte-container">
    <SfRichTextEditor @ref=@RTE EditorMode="EditorMode.HTML" Height="850">
        <RichTextEditorImageSettings SaveUrl=@saveUrl Path=@imagePath AllowedTypes="AllowedTypes" />
        <RichTextEditorToolbarSettings Items="@Tools">
            <RichTextEditorCustomToolbarItems>
                <RichTextEditorCustomToolbarItem Name="Save">
                    <Template>
                        <SfButton @onclick="ClickHandler">Save</SfButton>
                    </Template>
                </RichTextEditorCustomToolbarItem>
            </RichTextEditorCustomToolbarItems>
        </RichTextEditorToolbarSettings>
        @((MarkupString)Body)
    </SfRichTextEditor>
</div>
<SfToast ID="SaveToast" @ref=@ToastObj Title="@ToastTitle" Width="300" Height="150" Target="#UserTarget" Content=@ToastContent>
    <ToastPosition X="Center" Y="Top"></ToastPosition>
    <ToastButtons>
        <ToastButton Content = "Close" OnClick=@HideToast />
    </ToastButtons>
</SfToast>
<SfDialog Width="800" MinHeight="50" @bind-Visible=@DialogPageNameVisible IsModal="true" ShowCloseIcon="true" >
    <DialogTemplates>
        <Header>Page Name & Title</Header>
        <Content>
            <EditForm Model=@Content OnValidSubmit=@DialogPageNewOnClickHandler>
                <DataAnnotationsValidator />
                <div class="row">
                    <div class="col-md-4">
                        <SfTextBox ID="name" @bind-Value=@Content.Name Enabled="true" Placeholder="Page Name" FloatLabelType="FloatLabelType.Auto" />
                        <ValidationMessage For="@(() => Content.Name)" />
                    </div>
                    <div class="col-md-8">
                        <SfTextBox @bind-Value=@Content.Title Enabled="true" Placeholder="Page Title" FloatLabelType="FloatLabelType.Auto" />
                    </div>
                </div>
                <div class="e-footer-content">
                    <SfButton>Save</SfButton>
                </div>
            </EditForm>
        </Content>
    </DialogTemplates>
</SfDialog>
<SfDialog Width="800" MinHeight="200" @bind-Visible=@DialogVisible IsModal="true" ShowCloseIcon="true" >
    <DialogTemplates>
        <Header>Add New Page</Header>
        <Content>
            <EditForm Model=@Content OnValidSubmit=@DialogOnClickHandler>
                <DataAnnotationsValidator />
                <div class="row">
                <div class="col-md-4">
                    <SfTextBox ID="name" @bind-Value=@Content.Name Enabled="false" Placeholder="Page Name" FloatLabelType="FloatLabelType.Auto" />
                </div>
                <div class="col-md-8">
                    <SfTextBox @bind-Value=@Content.Title Enabled="false" Placeholder="Page Title" FloatLabelType="FloatLabelType.Auto" />
                </div>
            </div>
            <div class="row">
                <div class="form-group col-md-4">
                    <SfTextBox @bind-Value=@Content.LeftMediaId Enabled="true" Placeholder="Left Media Id" FloatLabelType="FloatLabelType.Auto" />
                </div>
                <div class="form-group col-md-4">
                    <SfTextBox @bind-Value=@Content.MiddleMediaId Enabled="true" Placeholder="Middle Media Id" FloatLabelType="FloatLabelType.Auto" />
                </div>
                <div class="col-md-4">
                    <SfTextBox @bind-Value=@Content.RightMediaId Enabled="true" Placeholder="Right Media Id" FloatLabelType="FloatLabelType.Auto" />
                </div>
            </div>
            <div class="row">
                <div class="col-md-4">
                    <SfTextBox @bind-Value=@Content.HeaderMediaId Enabled="true" Placeholder="Header Media Id" FloatLabelType="FloatLabelType.Auto" />
                </div>
                <div class="col-md-4">
                    <SfTextBox @bind-Value=@Content.FooterMediaId Enabled="true" Placeholder="Footer Media Id" FloatLabelType="FloatLabelType.Auto" />
                </div>
            </div>
            <div class="row">
                <div class="col-md-4">
                    <SfTextBox @bind-Value=@Content.UpdateUser Enabled="true" Placeholder="Updated By" FloatLabelType="FloatLabelType.Auto"/>
                </div>
                <div class="col-md-4">
                    <SfDateTimePicker @bind-Value=@Content.UpdateDate Enabled="true" Placeholder="Updated On" FloatLabelType="FloatLabelType.Auto" />
                </div>
            </div>
            <div class="e-footer-content">
                <SfButton>Save Page</SfButton>
            </div>
            </EditForm>
        </Content>
    </DialogTemplates>
</SfDialog>



<style>


    .rte-container {
        width: 100%;
        height: 100%;
    }

    .e-toast-container {
        margin-top: 450px;
        height: 600px;
    }

        .e-toast-container .e-toast {
            border: 1px solid black;
            border-radius: 25px;
        }
            /*Use the following CSS to customize the default toast’s title properties like font-family, font-size and color.*/
            .e-toast-container .e-toast .e-toast-message .e-toast-title {
                color: deepskyblue;
                font-size: 18px;
                font-weight: bold;
                text-align: center;
            }
            /*Use the following CSS to customize the default toast’s content properties like font-family, font-size and color.*/
            .e-toast-container .e-toast .e-toast-message .e-toast-content {
                color: black;
                font-size: 14px;
                font-weight: bold;
                background-color: lightskyblue;
                padding: 5px;
                width: 100%;
                height: 50px;
                vertical-align: middle;
                text-align: center;
            }

</style>
