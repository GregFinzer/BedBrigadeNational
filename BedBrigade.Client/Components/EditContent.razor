@using System.Security.Claims;
@using BedBrigade.Client.Services;
@using BedBrigade.Data.Models;
@using BedBrigade.Common;
@using Microsoft.AspNetCore.Components;
@using Microsoft.AspNetCore.Components.Authorization;
@using Syncfusion.Blazor.Grids;
@using Syncfusion.Blazor.Notifications;
@using Action = Syncfusion.Blazor.Grids.Action;
@using static BedBrigade.Common.Common;
@using BedBrigade.Client.Pages.Administration.Manage;
@using System.Data;
@using BedBrigade.Client.Pages;

@if (Content == null)
{
    <span class="spinner-grow m-5"></span>

    <span>Loading ....</span>
}
else 
{
    <div class="container my-3 ">
        <h3 class="">@workTitle </h3>
        <EditForm Model="Content">
            <DataAnnotationsValidator />
            <div class="row">
                 <div class="col-md-8" style="display: @DisplayTitle">
                    <SfTextBox @bind-Value=@Content.Title Enabled="true" Placeholder="Page Title" FloatLabelType="FloatLabelType.Auto" />
                    <ValidationMessage For="@(() => Content.Title)" />
                 </div>
             </div>
            <div class="row">
                <div class="col-md-8" style="display: @DisplayTitle">
                    <SfTextBox @bind-Value=@Content.Name Enabled="true" Placeholder="Page Name" FloatLabelType="FloatLabelType.Auto" />
                    <ValidationMessage For="@(() => Content.Name)" />
                </div>
            </div>
            <div class="rte-container">
                <SfRichTextEditor @ref=@RteObj EditorMode="EditorMode.HTML" Height="500">
                    <RichTextEditorImageSettings SaveUrl="@saveUrl" Path=@imagePath AllowedTypes="AllowedTypes" />
                    <RichTextEditorEvents />
                    <RichTextEditorToolbarSettings Items="@Tools">
                        <RichTextEditorCustomToolbarItems>
                        </RichTextEditorCustomToolbarItems>
                    </RichTextEditorToolbarSettings>
                    @((MarkupString)Body)
                </SfRichTextEditor>
            </div>
            <div >
                <button id="save" type="button" class="btn btn-primary" @onclick="(() => HandleSaveClick())">Save</button>
                <button id="cancel" type="button" class="btn btn-secondary" @onclick="(() => HandleCancelClick())">Cancel</button>
            </div>
        </EditForm>
    </div>

}
<SfToast ID="SaveToast" @ref=@ToastObj Title="@ToastTitle" Width="300" Height="150" Timeout=@ToastTimeout Target="#UserTarget" Content=@ToastContent>
    <ToastPosition X="Center" Y="Top"></ToastPosition>
</SfToast>




<style>


    .rte-container {
        width: 100%;
        height: 100%;
    }

    .e-toast-container {
        margin-top: 450px;
        height: 600px;
    }

        .e-toast-container .e-toast {
            border: 1px solid black;
            border-radius: 25px;
        }
            /*Use the following CSS to customize the default toast’s title properties like font-family, font-size and color.*/
            .e-toast-container .e-toast .e-toast-message .e-toast-title {
                color: deepskyblue;
                font-size: 18px;
                font-weight: bold;
                text-align: center;
            }
            /*Use the following CSS to customize the default toast’s Content properties like font-family, font-size and color.*/
            .e-toast-container .e-toast .e-toast-message .e-toast-Content {
                color: black;
                font-size: 14px;
                font-weight: bold;
                background-color: lightskyblue;
                padding: 5px;
                width: 100%;
                height: 50px;
                vertical-align: middle;
                text-align: center;
            }

</style>
