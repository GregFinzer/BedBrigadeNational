@using Microsoft.AspNetCore.Components
@using Microsoft.JSInterop;
@using BedBrigade.Client.Services;

@((MarkupString)footerContent)

@code {
    // Client
    private string footerContent = string.Empty;
    [Inject] private IContentService _svcContent { get; set; }
    [Inject] private ILocationService _svcLocation { get; set; }
    [Inject] NavigationManager _nm { get; set; }
    protected override async Task OnInitializedAsync()
    {
        string[] routePath = _nm.Uri.Split('/');
        if (string.IsNullOrEmpty(routePath[0])) routePath[0] = "National";
        var result = await _svcLocation.GetLocationByRouteAsync($"/{routePath[0]}");
        if (result.Success)
        {
            var contentResult = await _svcContent.GetAsync("Footer", result.Data.LocationId);
            if (contentResult.Success)
            {
                footerContent = contentResult.Data.ContentHtml;
            }
            else
            {
                
            }
        }
    }
}