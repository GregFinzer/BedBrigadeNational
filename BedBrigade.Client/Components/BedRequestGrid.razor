@using Syncfusion.Blazor.Notifications
@using Syncfusion.Blazor.Grids
@using Syncfusion.Blazor.Inputs
@using Syncfusion.Blazor.Buttons
@using FilterType = Syncfusion.Blazor.Grids.FilterType
@using EditMode = Syncfusion.Blazor.Grids.EditMode
@using BedBrigade.Data.Models

@if (BedRequests == null)
{
    <span class="spinner-grow m-5"></span>
    <span>Loading ....</span>
}
else
{
    <fieldset class="m-4">
        <legend>BedRequest</legend>
        <div class="col-md-12 control-sec">
            <div class="content-wrapper">
                <div class="row">
                    <SfGrid @ref="Grid" TValue="BedRequest" DataSource=@BedRequests
                            ContextMenuItems=@ContextMenu
                            EnablePersistence="true"
                            ShowColumnChooser="true"
                            Toolbar=@ToolBar
                            AllowPaging="true"
                            AllowSorting="true"
                            AllowExcelExport="true"
                            ShowColumnMenu="true"
                            AllowFiltering="true"
                            AllowReordering="true"
                            AllowResizing="true"
                            AllowSelection="true"
                            AllowPdfExport="true"
                            AllowTextWrap="true">
                        <GridPageSettings PageSizes="@(new int[]{5,10,15,20,25})" PageSize="15" />
                        <GridEvents DataBound=@DataBound
                            Destroyed=@OnDestroyed
                            OnLoad=@OnLoad
                            OnToolbarClick=@OnToolBarClick
                            OnActionBegin=@OnActionBegin
                            TValue="BedRequest"
                        />
                        <GridTemplates>
                            <EmptyRecordTemplate>
                                <span>@RecordText</span>
                            </EmptyRecordTemplate>
                        </GridTemplates>
                        <GridEditSettings Dialog=@DialogParams ShowDeleteConfirmDialog="true" Mode="@EditMode.Dialog">
                            <HeaderTemplate>
                                @{
                                    @HeaderTitle
                                  }
                            </HeaderTemplate>
                            <FooterTemplate>
                                <SfButton CssClass="btn btn-primary" OnClick=@(() => Save(context as BedRequest)) IsPrimary="true">@ButtonTitle</SfButton>
                                <SfButton OnClick="Cancel">Cancel</SfButton>
                            </FooterTemplate>
                            <Template>
                                @{
                                    BedRequest BedRequest = (context as BedRequest)!;

                                    <div class="row">
                                        <div class="col-md-4">
                                            <SfTextBox ID="name" @bind-Value=@BedRequest.FirstName Enabled="true" Placeholder="First Name" FloatLabelType="FloatLabelType.Auto" />
                                        </div>
                                        <div class="col-md-4">
                                            <SfTextBox @bind-Value=@BedRequest.LastName Enabled="true" Placeholder="Last Name" FloatLabelType="FloatLabelType.Auto" />
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-4">
                                            <SfMaskedTextBox Mask="(000) 000-0000" @bind-Value=@BedRequest.Phone Enabled="true" Placeholder="Phone" FloatLabelType="FloatLabelType.Auto" />
                                        </div>
                                        <div class="col-md-4">
                                            <SfTextBox @bind-Value=@BedRequest.Email Type="InputType.Email" Enabled="true" Placeholder="Email" FloatLabelType="FloatLabelType.Auto" />
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-md-4">
                                            <SfTextBox @bind-Value=@BedRequest.Street Enabled="true" Placeholder="Street" FloatLabelType="FloatLabelType.Auto" />
                                        </div>
                                        <div class="form-group col-md-4">
                                            <SfTextBox @bind-Value=@BedRequest.City Enabled="true" Placeholder="City" FloatLabelType="FloatLabelType.Auto" />
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-4">
                                            <SfTextBox @bind-Value=@BedRequest.State Enabled="true" Placeholder="State" FloatLabelType="FloatLabelType.Auto" />
                                        </div>
                                        <div class="col-md-4">
                                            <SfTextBox @bind-Value=@BedRequest.PostalCode Enabled="true" Placeholder="Postal Code" FloatLabelType="FloatLabelType.Auto" />
                                        </div>
                                   </div>
                                    <div class="row">
                                        <div class="col-md-4">
                                            <SfNumericTextBox @bind-Value=@BedRequest.NumberOfBeds Min="1" Mas="10" Enabled="true" Placeholder="Beds Requested" FloatLabelType="FloatLabelType.Auto" />
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-4">
                                            <SfTextBox @bind-Value=@BedRequest.AgesGender Enabled="true" Placeholder="Ages Genders" FloatLabelType="FloatLabelType.Auto" />
                                        </div>
                                    </div>

                                }
                            </Template>
                        </GridEditSettings>
                        <GridFilterSettings Type="FilterType.CheckBox"></GridFilterSettings>
                        <GridSortSettings>
                            <GridSortColumns>
                                <GridSortColumn Field="FullName" Direction="SortDirection.Ascending" />
                            </GridSortColumns>
                        </GridSortSettings>
                        <GridColumns>
                            <GridColumn Field=@nameof(BedRequest.BedRequestId) IsPrimaryKey="true" Visible="false" ShowInColumnChooser="false" />
                            <GridColumn Field=@nameof(BedRequest.FullName) ShowColumnMenu="false" HeaderText="Name" Type="ColumnType.String" AllowEditing="false" AllowFiltering="false" Width="15" />
                            <GridColumn Field=@nameof(BedRequest.Street) ShowColumnMenu="false" HeaderText="Address" Type="ColumnType.String" AllowEditing="false" AllowFiltering="false" Width="15" />
                            <GridColumn Field=@nameof(BedRequest.City) ShowColumnMenu="false" HeaderText="City" Type="ColumnType.String" AllowEditing="false" AllowFiltering="false" Width="15" />
                            <GridColumn Field=@nameof(BedRequest.State) ShowColumnMenu="false" HeaderText="State" Type="ColumnType.String" AllowEditing="false" AllowFiltering="false" Width="15" />
                            <GridColumn Field=@nameof(BedRequest.PostalCode) ShowColumnMenu="false" HeaderText="Postal Code" Type="ColumnType.String" AllowEditing="false" AllowFiltering="false" Width="15" />
                            <GridColumn Field=@nameof(BedRequest.NumberOfBeds) ShowColumnMenu="false" HeaderText="Bed Requests" Type="ColumnType.String" AllowEditing="false" AllowFiltering="false" Width="15" />
                            <GridColumn Field=@nameof(BedRequest.DeliveryDate) ShowColumnMenu="false" HeaderText="Date Delivered" Type="ColumnType.String" AllowEditing="false" AllowFiltering="false" Width="15" />
                        </GridColumns>
                    </SfGrid>

                </div>
            </div>
        </div>
    </fieldset>
}
<SfToast ID="SaveToast" @ref=@ToastObj Title="@ToastTitle" Width="300" Timeout=@ToastTimeout>
    <ToastPosition X="Center" Y="Top"></ToastPosition>
</SfToast>

@if (NoPaging)
{
    <style>
        .e-pager {
            display: none;
        }
    </style>
}
