@layout Layout.AdminLayout
@page "/administration/admintasks/addeditvolunteer/{LocationId:int}"
@page "/administration/admintasks/addeditvolunteer/{LocationId:int}/{VolunteerId:int}"
@using BedBrigade.Common.Models
<CheckAuth Roles=@RoleNames.CanManageVolunteers></CheckAuth>

@if (Model == null)
{
    <Spinner />
}
else
{
    <div class="container my-5 ">
        @if (VolunteerId == null)
        {
            <h3>Add Volunteer</h3>
        }
        else
        {
            <h3>Edit Volunteer</h3>
        }

        <EditForm Model="@Model" OnValidSubmit="HandleValidSubmit">
            <DataAnnotationsValidator/>

            <div class="row">

                <div class="col-md-4">
                    <div class="card">
                        <div class="card-header" style="text-align: center">
                            Volunteer Information
                        </div>
                        <div class="card-body">

                            <div class="form-group mb-1">
                                <label for="locationDropDown">Location</label>
                                <SfDropDownList id="locationDropDown" TItem="Location" TValue="Int32" DataSource="Locations" @bind-Value=@Model.LocationId Enabled="@CanSetLocation" Placeholder="Location" FloatLabelType="FloatLabelType.Auto">
                                    <DropDownListFieldSettings Text="Name" Value="LocationId"/>
                                </SfDropDownList>
                                <div style="font-size: smaller">
                                    <ValidationMessage For="@(() => Model.LocationId)"/>
                                </div>
                            </div>

                            <div class="form-group mb-1">
                                <label for="firstname" class="formlabel required">First Name</label>
                                <SfTextBox ID="firstname" @bind-Value="Model.FirstName"></SfTextBox>
                                <div style="font-size: smaller">
                                    <ValidationMessage For="@(() => Model.FirstName)"></ValidationMessage>
                                </div>
                            </div>

                            <div class="form-group mb-1">
                                <label for="lastName" class="formlabel required">Last Name</label>
                                <SfTextBox ID="lastName" @bind-Value="Model.LastName"></SfTextBox>
                                <div style="font-size: smaller">
                                    <ValidationMessage For="@(() => Model.LastName)"></ValidationMessage>
                                </div>
                            </div>

                            <div class="form-group mb-1">
                                <label for="email" class="formlabel required">Email</label>
                                <SfTextBox ID="email" @bind-Value="Model.Email"></SfTextBox>
                                <div style="font-size: smaller">
                                    <ValidationMessage For="@(() => Model.Email)"></ValidationMessage>
                                </div>
                            </div>

                            <div class="form-group mb-1">
                                <label for="phone">Phone</label>
                                <SfMaskedTextBox @ref="phoneTextBox" Mask='(000) 000-0000' ID="phone" @bind-Value="Model.Phone" Focus="HandlePhoneMaskFocus"></SfMaskedTextBox>
                                <div style="font-size: smaller">
                                    <ValidationMessage For="@(() => Model.Phone)"></ValidationMessage>
                                </div>
                            </div>

                            <div class="form-group mb-1">
                                <label for="org" class="formlabel">Organization</label>
                                <SfTextBox ID="org" @bind-Value="Model.Organization"></SfTextBox>
                            </div>

                            <div class="form-group mb-1">
                                <label for="group" class="formlabel">Group</label>
                                <SfTextBox ID="group" @bind-Value="Model.Group"></SfTextBox>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="card">
                        <div class="card-header" style="text-align: center">
                            Volunteer Information Continued
                        </div>
                        <div class="card-body">
                            
                            <div class="form-group mb-1">
                                <label for="volunteerArea" class="formlabel">Volunteer Area</label>
                                <SfTextBox ID="volunteerArea" @bind-Value="Model.VolunteerArea"></SfTextBox>
                            </div>
                            <div class="form-group mb-1">
                                <label for="otherArea" class="formlabel">Other Area</label>
                                <SfTextBox ID="otherArea" @bind-Value="Model.OtherArea"></SfTextBox>
                            </div>
                            <div class="form-group mb-1">
                                <label for="otherLanguagesSpokenList" class="formlabel">@_lc.Keys["OtherLanguagesSpoken"]</label>
                                <SfMultiSelect id="otherLanguagesSpokenList" TValue="string[]" TItem="SpokenLanguage" @bind-value="@SelectedLanguages" DataSource="@SpokenLanguages" Placeholder="@_lc.Keys["SelectLanguages"]" Mode="VisualMode.CheckBox">
                                    <MultiSelectFieldSettings Text="Name" Value="Value"></MultiSelectFieldSettings>
                                </SfMultiSelect>
                            </div>
                            @if (SelectedLanguages != null && SelectedLanguages.Length > 0)
                            {
                                <div class="form-group">
                                    <label for="translate" class="formlabel">@_lc.Keys["AreYouAbleToTranslate"]</label>
                                    <SfDropDownList ID="translate" TValue="CanYouTranslate" TItem="EnumNameValue<CanYouTranslate>" PopupHeight="350px" PopupWidth="350px" DataSource="TranslationOptions">
                                        <DropDownListFieldSettings Value="Value" Text="Name"></DropDownListFieldSettings>
                                    </SfDropDownList>
                                </div>
                            }
                            else
                            {
                                Model.CanYouTranslate = null;
                            }

                            <div class="form-group mb-1">
                                <SfCheckBox Label="@_lc.Keys["DoYouAttendChurch"]" @bind-Checked="Model.AttendChurch"></SfCheckBox>
                            </div>
                            @if (Model.AttendChurch)
                            {
                                <div class="form-group mb-1">
                                    <label for="churchName" class="formlabel">@_lc.Keys["WhatChurch"]</label>
                                    <SfTextBox ID="churchName" @bind-Value="Model.ChurchName"></SfTextBox>
                                </div>
                            }
                            else
                            {
                                Model.ChurchName = string.Empty;
                            }

                            <div class="form-group mb-1">
                                <SfCheckBox Label="@_lc.Keys["SubscribeToOurEmail"]" @bind-Checked="Model.SubscribedEmail"></SfCheckBox>
                            </div>

                            <div class="form-group mb-1">
                                <SfCheckBox Label="@_lc.Keys["SubscribeToOurText"]" @bind-Checked="Model.SubscribedSms"></SfCheckBox>
                            </div>
                            <div class="form-group">
                                <label for="inst" class="formlabel">@_lc.Keys["Message"]</label>
                                <SfTextBox ID="inst" @bind-Value="Model.Message" Multiline="true" HtmlAttributes="DescriptionHtmlAttribute"></SfTextBox>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-header" style="text-align: center">
                            Delivery Vehicle
                        </div>
                        <div class="card-body">
                            <div class="control-section">
                                <div class="radio-control">
                                    @BootstrapHelper.GetBootstrapMessage("help", _lc.Keys["DeliveryVehicleQuestion"], "", false, "compact")
                                    <div class="row">
                                        <SfRadioButton Label="@_lc.Keys["DeliveryVehicleNone"]" Name="RadioBtn" Value="@VehicleType.None.ToString()" @bind-checked="Model.VehicleType" TChecked="VehicleType"></SfRadioButton>
                                    </div>
                                    <hr />
                                    <div class="row">
                                        <SfRadioButton Label="@_lc.Keys["DeliveryVehicleMinivan"]" Name="RadioBtn" Value="@VehicleType.Minivan.ToString()" @bind-checked="Model.VehicleType" TChecked="VehicleType"></SfRadioButton>
                                    </div>
                                    <hr />
                                    <div class="row">
                                        <SfRadioButton Label="@_lc.Keys["DeliveryVehicleFullSizeVan"]" Name="RadioBtn" Value="@VehicleType.FullSizeVan.ToString()" @bind-checked="Model.VehicleType" TChecked="VehicleType"></SfRadioButton>
                                    </div>
                                    <hr />
                                    <div class="row">
                                        <SfRadioButton Label="@_lc.Keys["DeliveryVehicleSmallSuv"]" Name="RadioBtn" Value="@VehicleType.SmallSUV.ToString()" @bind-checked="Model.VehicleType" TChecked="VehicleType"></SfRadioButton>
                                    </div>
                                    <hr />
                                    <div class="row">
                                        <SfRadioButton Label="@_lc.Keys["DeliveryVehicleMediumSuv"]" Name="RadioBtn" Value="@VehicleType.MediumSUV.ToString()" @bind-checked="Model.VehicleType" TChecked="VehicleType"></SfRadioButton>
                                    </div>
                                    <hr />
                                    <div class="row">
                                        <SfRadioButton Label="@_lc.Keys["DeliveryVehicleLargeSuv"]" Name="RadioBtn" Value="@VehicleType.LargeSUV.ToString()" @bind-checked="Model.VehicleType" TChecked="VehicleType"></SfRadioButton>
                                    </div>
                                    <hr />
                                    <div class="row">
                                        <SfRadioButton Label="@_lc.Keys["DeliveryVehicleTruck"]" Value="@VehicleType.Truck.ToString()" Name="RadioBtn" @bind-checked="Model.VehicleType" TChecked="VehicleType"></SfRadioButton>
                                    </div>
                                    <hr />
                                    <div class="row">
                                        <SfRadioButton Label="@_lc.Keys["DeliveryVehicleOther"]" Name="RadioBtn" Value="@VehicleType.Other.ToString()" @bind-checked="Model.VehicleType" TChecked="VehicleType"></SfRadioButton>
                                    </div>
                                </div>
                            </div>
                            @if (Model.VehicleType == VehicleType.Other)
                            {
                                <div class="form-group">
                                    <label for="vehicleDescription" class="formlabel">@_lc.Keys["VehicleDescription"]</label>
                                    <SfTextBox ID="vehicleDescription" @bind-Value="Model.VehicleDescription"></SfTextBox>
                                </div>
                            }
                            else
                            {
                                Model.VehicleDescription = string.Empty;
                            }
                        </div>
                    </div>
                </div>
            </div>
            
            @if (!string.IsNullOrEmpty(ErrorMessage))
            {
                <div class="alert alert-danger" role="alert">
                    @ErrorMessage
                </div>
            }

            <button type="submit" class="btn btn-primary mt-5">Save</button>
            <button type="button" class="btn btn-secondary mt-5" @onclick="HandleCancel">Cancel</button> 
        </EditForm>
    </div>
}
