@page "/login"
@page "/login/{user}"
@page "/login/{user}/{password}"

<PageTitle>@($"{_lc.Keys["TheBedBrigade"]} | {_lc.Keys["LogIn"]}")</PageTitle>

@using BedBrigade.Client.Components

<div class="text-center w-100 m-2 text-black-50">
    <h2>@_lc.Keys["BedBrigadeWeb"]</h2>
</div>

<div class="card">
    <div class="card-body">
        <h5 class="card-title">@_lc.Keys["PleaseEnterYourLogin"]</h5>
        <EditForm EditContext="@EC">
            <div class="form-group">
                <label for="email">@_lc.Keys["Email"]</label>
                <InputText Id="email" @ref=@inputTextFocus class="form-control" @bind-Value="loginModel.Email"  />
                <ValidationMessage For="@(() => loginModel.Email)" />
            </div>

            <div class="form-group">
                <label for="password">@_lc.Keys["Password"]</label>
                <InputText Id="password" type=@passwordType class="form-control" @bind-Value="loginModel.Password" />
                <ValidationMessage For="@(() => loginModel.Password)" />
            </div>
            <div class="d-flex justify-content-between align-items-center mb-3">
                <div class="form-check">
                    <input type="checkbox" checked=@showPassword @oninput=@HandlePassword/>
                    <label for="showPassword">@_lc.Keys["ShowPassword"]</label>
                </div>
                <a class="link-primary" href="@ForgotPasswordHref">@_lc.Keys["ForgotPassword"]</a>
            </div>
            <h6 class="warning login-error text-center" style="display: @DisplayError">@errorMessage</h6>
            <div class="w-100 text-center">
                <button class="btn btn-primary" @onclick="(HandleLogin)" disabled="@_isBusy">
                    @if (_isBusy)
                    {
                        <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
                    }
                    @_lc.Keys["LogIn"]
                </button>
            </div>
        </EditForm>
    </div>
</div>


